# 7ì¥ ì˜¤ë¥˜ ì²˜ë¦¬

> ğŸ“… ì‘ì„±ì¼: 2025-04-16

## ğŸ“Œ í•µì‹¬ ìš”ì•½
ì˜¤ë¥˜ ì²˜ë¦¬ëŠ” ì¤‘ìš”í•˜ì§€ë§Œ, ì˜¤ë¥˜ ì²˜ë¦¬ ì½”ë“œë¥¼ ì—¬ê¸° ì €ê¸° í©ì–´ì§€ê²Œ ë§Œë“¤ì–´ í”„ë¡œê·¸ë¨ ë…¼ë¦¬ë¥¼ ì´í•´í•˜ê¸° ì–´ë µê²Œ í•˜ë©´, ê¹¨ë—í•œ ì½”ë“œë¼ê³  ë¶€ë¥´ê¸° í˜ë“¤ë‹¤.

## ì˜¤ë¥˜ ì½”ë“œë³´ë‹¤ ì˜ˆì™¸(Exceptions)ë¥¼ ì‚¬ìš©í•˜ë¼

- ì˜ˆì „ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë“¤ì€ exceptionì„ ì œê³µí•˜ì§€ ì•Šì•˜ìŒ.

  â˜ ï¸ ë‚˜ìœ ì˜ˆì‹œ

    ```java
    // Bad
    public class DeviceController {
      ...
      public void sendShutDown() {
        DeviceHandle handle = getHandle(DEV1);
        // Check the state of the device
        if (handle != DeviceHandle.INVALID) {
          // Save the device status to the record field
          retrieveDeviceRecord(handle);
          // If not suspended, shut down
          if (record.getStatus() != DEVICE_SUSPENDED) {
            pauseDevice(handle);
            clearDeviceWorkQueue(handle);
            closeDevice(handle);
          } else {
            logger.log("Device suspended. Unable to shut down");
          }
        } else {
          logger.log("Invalid handle for: " + DEV1.toString());
        }
      }
      ...
    }
    ```

    - ì—ëŸ¬ flagë¥¼ setí•˜ê±°ë‚˜ ì—ëŸ¬ ì½”ë“œë¥¼ ë¦¬í„´í–ˆì—ˆìŒ
        - â‡’ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ìŠì–´ë¹„ë¦¬ê¸° ì‰½ê³ , ë¡œì§ì„ í—·ê°ˆë¦¬ê²Œ í•˜ê¸° ì‰¬ì›€.
        - â‡’ exceptionsë¥¼ ì‚¬ìš©í•˜ì

  ğŸ‘¼ ì¢‹ì€ ì˜ˆì‹œ

    ```java
    // Good
    public class DeviceController {
      ...
      public void sendShutDown() {
        try {
          tryToShutDown();
        } catch (DeviceShutDownError e) {
          logger.log(e);
        }
      }
        
      private void tryToShutDown() throws DeviceShutDownError {
        DeviceHandle handle = getHandle(DEV1);
        DeviceRecord record = retrieveDeviceRecord(handle);
        pauseDevice(handle); 
        clearDeviceWorkQueue(handle); 
        closeDevice(handle);
      }
      
      private DeviceHandle getHandle(DeviceID id) {
        ...
        throw new DeviceShutDownError("Invalid handle for: " + id.toString());
        ...
      }
      ...
    }
    ```


## Try-Catch-Finally ë¬¸ë¶€í„° ì‘ì„±í•´ë¼

- try ë¬¸ì€ transaction ì²˜ëŸ¼ ë™ì‘í•˜ëŠ” ì‹¤í–‰ì½”ë“œë¡œ, catch ë¬¸ì€ try ë¬¸ì— ê´€ê³„ì—†ì´ í”„ë¡œê·¸ë¨ì„ ì¼ê´€ì ì¸ ìƒíƒœë¡œ ìœ ì§€í•˜ë„ë¡ í•¨
- ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ ì½”ë“œì˜ Scope ì •ì˜ê°€ ê°€ëŠ¥í•´ì§„ë‹¤.

ì˜ˆì‹œ - íŒŒì¼ì´ ì—†ìœ¼ë©´ ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ”ì§€ ì•Œì•„ë³´ëŠ” ë‹¨ìœ„í…ŒìŠ¤íŠ¸

```java
@Test(expected = StorageException.class)
public void retrieveSectionShouldThrowOnInvalidFileName() {
	sectionStore.retreiveSection("invalid-file")
}	
```

ì˜ˆì‹œ - ìœ„ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì— ë§ì¶° êµ¬í˜„í•œ ì½”ë“œ

```java
    // Step 1: StorageExceptionì„ ë˜ì§€ì§€ ì•Šìœ¼ë¯€ë¡œ ì´ í…ŒìŠ¤íŠ¸ëŠ” ì‹¤íŒ¨í•œë‹¤.
  public List<RecordedGrip> retrieveSection(String sectionName) {
    // dummy return until we have a real implementation
    return new ArrayList<RecordedGrip>();
  }
  
    // Step 2: ì´ì œ í…ŒìŠ¤íŠ¸ëŠ” í†µê³¼í•œë‹¤.
  public List<RecordedGrip> retrieveSection(String sectionName) {
    try {
      FileInputStream stream = new FileInputStream(sectionName)
    } catch (Exception e) {
      throw new StorageException("retrieval error", e);
    }
  return new ArrayList<RecordedGrip>();
}

  // Step 3: Exceptionì˜ ë²”ìœ„ë¥¼ FileNotFoundExceptionìœ¼ë¡œ ì¤„ì—¬ ì •í™•íˆ
   // ì–´ë–¤ Exceptionì´ ë°œìƒí•œì§€ ì²´í¬í•˜ì.
   
  public List<RecordedGrip> retrieveSection(String sectionName) {
    try {
      FileInputStream stream = new FileInputStream(sectionName);
      stream.close();
    } catch (FileNotFoundException e) {
      throw new StorageException("retrieval error", e);
    }
    return new ArrayList<RecordedGrip>();
  }
```

## Unchecked Excpetionsë¥¼ ì‚¬ìš©í•´ë¼

- ì•ˆì •ëœ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì œì‘í•˜ëŠ” ìš”ì†Œë¡œ í™•ì¸ëœ ì˜ˆì™¸ê°€ ë°˜ë“œì‹œ í•„ìš”í•˜ì§„ ì•ŠìŒ
- **checked excpetionì€ OCPë¥¼ ìœ„ë°˜í•¨.**
    - í•˜ìœ„ ë‹¨ê³„ì—ì„œ ì½”ë“œë¥¼ ë³€ê²½í•˜ë©´ ìƒìœ„ ë‹¨ê³„ ë©”ì„œë“œ ì„ ì–¸ë¶€ë¥¼ ëª¨ë‘ ê³ ì³ì•¼ í•¨.

## Exceptionsë¡œ ë¬¸ë§¥, ì˜ë¯¸ë¥¼ ì œê³µí•´ë¼

- ì˜ˆì™¸ë¥¼ ë˜ì§ˆ ë•ŒëŠ” ì „í›„ ìƒí™©ì„ ì¶©ë¶„íˆ ë§ë¶™ì—¬ì•¼ í•œë‹¤.

- ì˜¤ë¥˜ ë©”ì„¸ì§€ì— ì •ë³´ë¥¼ ë‹´ì•„ ì˜ˆì™¸ì™€ í•¨ê»˜ ë˜ì ¸ì•¼ í•¨.
-

<aside>
âœ…

ì˜¤ë¥˜ ë©”ì‹œì§€ì— ì •ë³´ë¥¼ ë‹´ì•„ ì˜ˆì™¸ì™€ í•¨ê»˜ ë˜ì ¸ì•¼ í•œë‹¤.

- ì‹¤íŒ¨í•œ ì—°ì‚° ì´ë¦„ê³¼ ì‹¤íŒ¨ ìœ í˜•ë„ ì–¸ê¸‰
</aside>

## í˜¸ì¶œìë¥¼ ê³ ë ¤í•´ ì˜ˆì™¸ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ë¼

- ì˜¤ë¥˜ê°€ ë°œìƒí•œ ìœ„ì¹˜ë¡œ ì˜¤ë¥˜ ë¶„ë¥˜ê°€ ê°€ëŠ¥í•˜ë‹¤.
    - ì˜ˆë¥¼ ë“¤ì–´, ë””ë°”ì´ìŠ¤ ì‹¤íŒ¨, í”„ë¡œê·¸ë˜ë° ì˜¤ë¥˜ ë“±ìœ¼ë¡œ ë¶„ë¥˜
- ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€, `ì˜¤ë¥˜ë¥¼ ì¡ì•„ë‚´ëŠ” ë°©ë²•` ì´ ë˜ì–´ì•¼ í•œë‹¤.

ì•ˆì¢‹ì€ ì˜ˆì‹œ - ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í˜¸ì¶œí•˜ëŠ” try-catch-finally ë¬¸ì„ í¬í•¨í•œ ì½”ë“œ

```java
  // Bad
  // catchë¬¸ì˜ ë‚´ìš©ì´ ê±°ì˜ ê°™ë‹¤.
  
ACMEPort port = new ACMEPort(12);
  try {
    port.open();
  } catch (DeviceResponseException e) {
    reportPortError(e);
    logger.log("Device response exception", e);
  } catch (ATM1212UnlockedException e) {
    reportPortError(e);
    logger.log("Unlock exception", e);
  } catch (GMXError e) {
    reportPortError(e);
    logger.log("Device response exception");
  } finally {
    ...
  }
```

```java
  // Good
  // ACME í´ë˜ìŠ¤ë¥¼ LocalPort í´ë˜ìŠ¤ë¡œ ë˜í•‘í•´ new ACMEPort().open() ë©”ì†Œë“œì—ì„œ ë˜ì§ˆ ìˆ˜ ìˆëŠ” exceptionë“¤ì„ ê°„ëµí™”
  
  LocalPort port = new LocalPort(12);
  try {
    port.open();
  } catch (PortDeviceFailure e) {
    reportError(e);
    logger.log(e.getMessage(), e);
  } finally {
    ...
  }
  
  // ì•„ë˜ LocalPort í´ë˜ìŠ¤ëŠ” ACMEPort í´ë˜ìŠ¤ê°€ ë˜ì§€ëŠ” ì˜ˆì™¸ë¥¼ ì¡ì•„ ë°˜í™˜í•˜ëŠ” Wrapperì¼ ë¿ì´ë‹¤.
  public class LocalPort {
    private ACMEPort innerPort;
    public LocalPort(int portNumber) {
      innerPort = new ACMEPort(portNumber);
    }
    
    public void open() {
      try {
        innerPort.open();
      } catch (DeviceResponseException e) {
        throw new PortDeviceFailure(e);
      } catch (ATM1212UnlockedException e) {
        throw new PortDeviceFailure(e);
      } catch (GMXError e) {
        throw new PortDeviceFailure(e);
      }
    }
    ...
  }
```

- ì™¸ë¶€ APIë¥¼ ê°ì‹¸ë©´ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ í”„ë¡œê·¸ë¨ ì‚¬ì´ì—ì„œ ì˜ì¡´ì„±ì´ í¬ê²Œ ì¤„ì–´ë“¦

## ì •ìƒ íë¦„ì„ ì •ì˜í•˜ë¼

- ì¼ë°˜ì ìœ¼ë¡œëŠ” ìœ„ì—ì„œ ë´¤ë˜ ë°©ì‹ë“¤ì´ ìœ ìš©í•˜ì§€ë§Œ, catch ë¬¸ì—ì„œ ì˜ˆì™¸ì ì¸ ìƒí™©(special case)ì„ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ê²½ìš° ì½”ë“œê°€ ë”ëŸ¬ì›Œì§€ëŠ” ì¼ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
-

## nullì„ ë°˜í™˜í•˜ì§€ ë§ˆë¼

```java
  // BAD!!!!

  public void registerItem(Item item) {
    if (item != null) {
      ItemRegistry registry = peristentStore.getItemRegistry();
      if (registry != null) {
        Item existing = registry.getItem(item.getID());
        if (existing.getBillingPeriod().hasRetailOwner()) {
          existing.register(item);
        }
      }
    }
  }
  
  
  // ìœ„ peristentStoreê°€ nullì¸ ê²½ìš°ì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬ê°€ ì•ˆëœ ê²ƒì„ ëˆˆì¹˜ì±˜ëŠ”ê°€?
  // ë§Œì•½ ì—¬ê¸°ì„œ NullPointerExceptionì´ ë°œìƒí–ˆë‹¤ë©´ ìˆ˜ì‹­ë‹¨ê³„ ìœ„ì˜ ë©”ì†Œë“œì—ì„œ ì²˜ë¦¬í•´ì¤˜ì•¼ í•˜ë‚˜?
  // ì´ ë©”ì†Œë“œì˜ ë¬¸ì œì ì€ null ì²´í¬ê°€ ë¶€ì¡±í•œê²Œ ì•„ë‹ˆë¼ nullì²´í¬ê°€ ë„ˆë¬´ ë§ë‹¤ëŠ” ê²ƒì´ë‹¤.
```

- ë©”ì„œë“œì—ì„œ nullì„ ë°˜í™˜í•˜ê³ í”ˆ ìœ í˜¹ì´ ë“ ë‹¤ë©´ ê·¸ ëŒ€ì‹  ì˜ˆì™¸ë¥¼ ë˜ì§€ê±°ë‚˜ íŠ¹ìˆ˜ ì‚¬ë¡€ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
- ì‚¬ìš©í•˜ë ¤ëŠ” ì™¸ë¶€ APIê°€ nullì„ ë°˜í™˜í•œë‹¤ë©´ Wrapper ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ ì˜ˆì™¸ë¥¼ ë˜ì§€ê±°ë‚˜ íŠ¹ìˆ˜ ì‚¬ë¡€ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” ë°©ì‹ì„ ê³ ë ¤.
- ë§ì€ ê²½ìš°, íŠ¹ìˆ˜ ì‚¬ë¡€ ê°ì²´ê°€ ì†ì‰¬ìš´ í•´ê²°ì±…ì´ë‹¤.

```java
  // Bad
  List<Employee> employees = getEmployees();
  if (employees != null) {
    for(Employee e : employees) {
      totalPay += e.getPay();
    }
  }
```

- getEmployeesëŠ” nullë„ ë°˜í™˜í•œë‹¤. í•˜ì§€ë§Œ, ë°˜ë“œì‹œ nullì„ ë°˜í™˜í•  í•„ìš”ëŠ” ì—†ë‹¤.
    - getEmployeesë¥¼ ë³€ê²½í•´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•œë‹¤ë©´, ì½”ë“œê°€ í›¨ì”¬ ê¹”ë”í•´ì§„ë‹¤.

    ```java
      // Good
      List<Employee> employees = getEmployees();
      for(Employee e : employees) {
        totalPay += e.getPay();
      }
      
      public List<Employee> getEmployees() {
        if( .. there are no employees .. )
          return Collections.emptyList();
        }
    }
    ```


## nullì„ ì „ë‹¬í•˜ì§€ ë§ˆë¼

- nullì„ ë¦¬í„´í•˜ëŠ” ë°©ì‹ë„ ë‚˜ì˜ì§€ë§Œ, nullì„ ë©”ì„œë“œë¡œ ë„˜ê¸°ëŠ” ê²ƒì´ ë” ë‚˜ì˜ë‹¤.

```java
// Bad
// calculator.xProjection(null, new Point(12, 13));
// ìœ„ì™€ ê°™ì´ ë¶€ë¥¼ ê²½ìš° NullPointerException ë°œìƒ
public class MetricsCalculator {
  public double xProjection(Point p1, Point p2) {
    return (p2.x â€“ p1.x) * 1.5;
  }
  ...
}

// Bad
// NullPointerExceptionì€ ì•ˆë‚˜ì§€ë§Œ ìœ—ë‹¨ê³„ì—ì„œ InvalidArgumentExceptionì´ ë°œìƒí•  ê²½ìš° ì²˜ë¦¬í•´ì¤˜ì•¼ í•¨.
public class MetricsCalculator {
  public double xProjection(Point p1, Point p2) {
    if(p1 == null || p2 == null){
      throw InvalidArgumentException("Invalid argument for MetricsCalculator.xProjection");
    }
    return (p2.x â€“ p1.x) * 1.5;
  }
}

// Bad
// ì¢‹ì€ ëª…ì„¸ì´ì§€ë§Œ ì²«ë²ˆì§¸ ì˜ˆì‹œì™€ ê°™ì´ NullPointerException ë¬¸ì œë¥¼ í•´ê²°í•˜ì§€ ëª»í•œë‹¤.
public class MetricsCalculator {
  public double xProjection(Point p1, Point p2) {
    assert p1 != null : "p1 should not be null";
    assert p2 != null : "p2 should not be null";
    
    return (p2.x â€“ p1.x) * 1.5;
  }
}
```

## ğŸ’­ ëŠë‚€ ì 

- error flagë¥¼ ë¦¬í„´í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” exceptionìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ë‚«ë‹¤ëŠ” ê²ƒì„ ì²˜ìŒ ì•Œê²Œ ë˜ì—ˆë‹¤. ì•ìœ¼ë¡œëŠ” í•´ë‹¹ ë°©ë²•ì„ ì´ìš©í•´ì„œ ì—ëŸ¬ í•¸ë“¤ë§ì„ í•´ì•¼ê² ë‹¤ê³  ìƒê°í–ˆë‹¤.